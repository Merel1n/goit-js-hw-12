{"version":3,"file":"commonHelpers.js","sources":["../src/js/refs.js","../src/js/additional-functions.js","../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["export const refs = {\n  formElem: document.querySelector('#search'),\n  spanElem: document.querySelector('.loader'),\n  listElems: document.querySelector('.gallery'),\n  btnElement: document.querySelector('.btn'),\n};\n","import { refs } from './refs';\nimport { currentPage } from '../main';\nimport { maxPage } from '../main';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n// =====================================================================\nexport function showLoader() {\n  refs.spanElem.classList.remove('hidden');\n}\n// =====================================================================\nexport function hideLoader() {\n  refs.spanElem.classList.add('hidden');\n}\n// =====================================================================\nexport function showBtnLoadMore() {\n  refs.btnElement.classList.remove('hidden');\n}\n// =====================================================================\nexport function hideBtnLoadMore() {\n  refs.btnElement.classList.add('hidden');\n}\n// =====================================================================\nexport function updateBtnStatus() {\n  if (currentPage >= maxPage) {\n    hideBtnLoadMore();\n    if (maxPage) {\n      iziToast.show({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'center',\n        displayMode: 'once',\n        maxWidth: 500,\n        imageWidth: 600,\n      });\n    }\n  } else {\n    showBtnLoadMore();\n  }\n}\n// =====================================================================\nexport function showError(message) {\n  hideLoader();\n  refs.listElems.innerHTML = ' ';\n  iziToast.show({\n    message: message,\n    position: 'center',\n    displayMode: 'once',\n    maxWidth: 500,\n    imageWidth: 600,\n  });\n}\n// =====================================================================\nexport function skipOldElement() {\n  const liElem = refs.listElems.children[0];\n  const height = liElem.getBoundingClientRect().height;\n\n  scrollBy({\n    top: height * 2,\n    behavior: 'smooth',\n  });\n}\n","import axios from 'axios';\nimport { showError } from './additional-functions';\n// =====================================================================\nconst articlesAPI = axios.create({\n  baseURL: 'https://pixabay.com',\n});\n// =====================================================================\nexport async function getImage(query, currentPage) {\n  try {\n    const params = {\n      key: '44483599-b54948657c32ff6f545b82f23',\n      q: query,\n      image_type: 'photo',\n      pretty: true,\n      orientation: 'horizontal',\n      safesearch: true,\n      page: currentPage,\n      per_page: 15,\n    };\n\n    const result = await articlesAPI.get('/api/', { params });\n    return result.data;\n  } catch (error) {\n    showError('Warning! Enter a word for the query, please.');\n  }\n}\n","export function galleryTemplate(images) {\n  return images\n    .map(\n      ({\n        largeImageURL,\n        webformatURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n        return `<li class=\"gallery-item\">\n\t<a class=\"gallery-link\" href=\"${largeImageURL}\">\n\t\t<img \n\t\t\tclass=\"gallery-image\" \n\t\t\tsrc=\"${webformatURL}\" \n\t\t\talt=\"${tags}\"\n            \n\t\t\t/>\n      <ul class=\"list-img\">\n      <li class=\"item-img\"><p class=\"title-img\">Likes</p><p class=\"text-img\">${likes}</p></li> \n      <li class=\"item-img\"><p class=\"title-img\">Views</p><p class=\"text-img\">${views}</p></li> \n      <li class=\"item-img\"><p class=\"title-img\">Comments</p><p class=\"text-img\">${comments}</p></li> \n      <li class=\"item-img\"><p class=\"title-img\">Downloads</p><p class=\"text-img\">${downloads}</p></li>     \n      </ul>\n\t</a>\n</li>`;\n      }\n    )\n    .join('');\n}\n","import { refs } from './js/refs';\nimport { getImage } from './js/pixabay-api';\nimport { galleryTemplate } from './js/render-functions';\nimport { showError } from './js/additional-functions';\nimport { updateBtnStatus } from './js/additional-functions';\nimport { hideLoader } from './js/additional-functions';\nimport { hideBtnLoadMore } from './js/additional-functions';\nimport { showLoader } from './js/additional-functions';\nimport { skipOldElement } from './js/additional-functions';\nimport simpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n// ================================================================================\nlet value = '';\nexport let currentPage = 1;\nexport let maxPage = 1;\nconst perPages = 15;\nlet lightbox;\n// ===============================================================================\nrefs.formElem.addEventListener('submit', async e => {\n  e.preventDefault();\n  value = e.target.elements.search.value.trim();\n  if (!value) {\n    showError(\n      'Sorry, there are no images matching your search query. Please try again!'\n    );\n    return;\n  }\n  currentPage = 1;\n  showLoader();\n  try {\n    const data = await getImage(value, currentPage);\n    maxPage = Math.ceil(data.totalHits / perPages);\n    if (data.hits.length === 0) {\n      showError(\n        'Sorry, there are no images matching your search query. Please try again!'\n      );\n      refs.inputElem.value = '';\n      return;\n    }\n    const markup = await galleryTemplate(data.hits);\n    refs.listElems.innerHTML = markup;\n    lightbox = new simpleLightbox('.gallery a', {\n      captions: true,\n      captionsData: 'alt',\n      captionDelay: 250,\n    });\n  } catch (error) {\n    showError(\n      'Sorry, there are no images matching your search query. Please try again!'\n    );\n  }\n  updateBtnStatus();\n  hideLoader();\n  refs.formElem.elements.search.value = '';\n});\n// ==============================================================================\nrefs.btnElement.addEventListener('click', async e => {\n  currentPage++;\n  hideBtnLoadMore();\n  try {\n    const data = await getImage(value, currentPage);\n    const markup = await galleryTemplate(data.hits);\n    refs.listElems.insertAdjacentHTML('beforeend', markup);\n    if (!lightbox) {\n      lightbox = new simpleLightbox('.gallery a', {\n        captions: true,\n        captionsData: 'alt',\n        captionDelay: 250,\n      });\n    } else {\n      lightbox.refresh();\n    }\n    skipOldElement();\n  } catch (error) {\n    showError(\n      'Sorry, there are no images matching your search query. Please try again!'\n    );\n  }\n\n  updateBtnStatus();\n});\n"],"names":["refs","showLoader","hideLoader","showBtnLoadMore","hideBtnLoadMore","updateBtnStatus","currentPage","maxPage","iziToast","showError","message","skipOldElement","height","articlesAPI","axios","getImage","query","params","galleryTemplate","images","largeImageURL","webformatURL","tags","likes","views","comments","downloads","value","perPages","lightbox","e","data","markup","simpleLightbox"],"mappings":"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"}